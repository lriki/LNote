//=============================================================================
//y RubyFramework z
//=============================================================================

//-------------------------------------------------------------------------
//
//-------------------------------------------------------------------------
#include "stdafx.h"
#include "RubyEngine.h"
#include "RubyException.h"
#include "RubyFramework.h"

//-------------------------------------------------------------------------
//
//-------------------------------------------------------------------------
namespace LNote
{
namespace Binding
{
namespace Ruby
{

//=============================================================================
// ¡ Module_Framework
//=============================================================================

    VALUE               Module_Framework::mRubyModule;
    Core::Framework*    Module_Framework::mFramework = NULL;

    //---------------------------------------------------------------------
    //
    //---------------------------------------------------------------------
    void Module_Framework::registerRubyObject()
    {
        mFramework = Engine::getFramework();

        mRubyModule = rb_define_module_under( Engine::getRubyModule(), "Framework" );
        rb_define_module_function( mRubyModule, "update", TO_RUBY_FUNC( update ), 0 );
    }

    //---------------------------------------------------------------------
    //
    //---------------------------------------------------------------------
    VALUE Module_Framework::update( VALUE self )
    {
        if ( !mFramework->update() )
        {
            Class_LNException::raiseExit();
        }
        return self;
    }


//-------------------------------------------------------------------------
//
//-------------------------------------------------------------------------

} // namespace Ruby
} // namespace Binding
} // namespace LNote

//=============================================================================
//                              end of file
//=============================================================================